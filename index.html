<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÖŸéÿ≥Ÿíÿ¨ŸêÿØŸí ÿßŸéŸÑŸíÿ≠ŸéŸÖŸíÿ≤Ÿé€É - Masjid Al Hamzah</title>
    <meta name="description" content="Prayer times app for Masjid Al Hamzah, HajiBagh, Buchpora, Srinagar">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üïå</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0a5c36;
            --secondary-color: #2e8b57;
            --accent-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --info-color: #3498db;
            --background-light: #f8f9fa;
            --background-dark: #121212;
            --card-light: #ffffff;
            --card-dark: #1e1e1e;
            --text-light: #333333;
            --text-dark: #ffffff;
            --text-secondary-light: #666666;
            --text-secondary-dark: #cccccc;
            --border-light: #e0e0e0;
            --border-dark: #333333;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-dark: 0 4px 12px rgba(0, 0, 0, 0.3);
            --shadow-large: 0 8px 24px rgba(0, 0, 0, 0.12);
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #27ae60);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        body {
            background-color: var(--background-light);
            color: var(--text-light);
            transition: all 0.3s ease;
            min-height: 100vh;
            padding-bottom: 80px;
            line-height: 1.6;
        }

        body.dark-mode {
            background-color: var(--background-dark);
            color: var(--text-dark);
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 25px 0 20px;
            text-align: center;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 6px 25px rgba(10, 92, 54, 0.4);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.1;
        }

        .masjid-name {
            font-size: 2.3rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
        }

        .location {
            font-size: 1.05rem;
            opacity: 0.95;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            font-weight: 500;
        }

        .date-container {
            background: rgba(255, 255, 255, 0.18);
            backdrop-filter: blur(12px);
            padding: 15px 25px;
            border-radius: 22px;
            display: inline-block;
            position: relative;
            z-index: 2;
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .current-date {
            font-size: 1.15rem;
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        /* Theme Toggle */
        .theme-toggle-container {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }

        .theme-toggle {
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
        }

        .theme-toggle::before {
            content: '\f185';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffd700;
            font-size: 14px;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .theme-toggle::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 3px;
            transform: translateY(-50%);
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
        }

        body.dark-mode .theme-toggle::before {
            content: '\f186';
            left: auto;
            right: 8px;
            color: #f0e68c;
        }

        body.dark-mode .theme-toggle::after {
            left: calc(100% - 29px);
            background: #f0e68c;
        }

        /* Next Prayer Card */
        .next-prayer-card {
            background: var(--gradient-primary);
            color: white;
            border-radius: 28px;
            padding: 35px 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-large);
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .next-prayer-card:hover {
            transform: translateY(-3px);
        }

        .next-prayer-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 250px;
            height: 250px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 50%;
        }

        .card-title {
            font-size: 1.15rem;
            opacity: 0.9;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .prayer-name {
            font-size: 2.8rem;
            font-weight: 900;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .prayer-time {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            position: relative;
            z-index: 1;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .time-left {
            background: rgba(255, 255, 255, 0.25);
            padding: 15px 30px;
            border-radius: 18px;
            font-size: 1.5rem;
            font-weight: 800;
            display: inline-block;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.35);
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .prayer-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 4px;
            margin-top: 25px;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #e6ffe6);
            width: 0%;
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        }

        /* Prayer Times Grid - UPDATED */
        .prayer-times-grid {
            background: var(--card-light);
            border-radius: 28px;
            padding: 35px 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        body.dark-mode .prayer-times-grid {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
            border-color: rgba(255,255,255,0.05);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 30px;
            color: var(--primary-color);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            padding-bottom: 15px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        body.dark-mode .section-title {
            color: var(--accent-color);
        }

        body.dark-mode .section-title::after {
            background: var(--gradient-accent);
        }

        .prayer-row {
            display: grid;
            grid-template-columns: auto 1fr auto;
            padding: 18px 0;
            border-bottom: 1px solid var(--border-light);
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }

        body.dark-mode .prayer-row {
            border-bottom: 1px solid var(--border-dark);
        }

        .prayer-row:last-child {
            border-bottom: none;
        }

        .prayer-row.active {
            background: rgba(10, 92, 54, 0.12);
            border-radius: 18px;
            padding: 18px 20px;
            transform: translateX(5px);
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 4px 12px rgba(10, 92, 54, 0.15);
        }

        body.dark-mode .prayer-row.active {
            background: rgba(46, 204, 113, 0.15);
            border-left-color: var(--accent-color);
        }

        .prayer-icon {
            width: 48px;
            height: 48px;
            background: rgba(10, 92, 54, 0.12);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }

        .prayer-row.active .prayer-icon {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transform: scale(1.1);
        }

        body.dark-mode .prayer-icon {
            background: rgba(46, 204, 113, 0.18);
            color: var(--accent-color);
        }

        .prayer-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .prayer-label {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .prayer-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary-light);
            opacity: 0.9;
            font-weight: 500;
        }

        body.dark-mode .prayer-subtitle {
            color: var(--text-secondary-dark);
        }

        /* UPDATED: Prayer Times Display - Jamaat BIG, Azaan small below */
        .prayer-times {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
            text-align: right;
        }

        /* Jamaat Time - BIG and HIGHLIGHTED */
        .jamaat-time {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--primary-color);
            font-family: 'Courier New', monospace;
            background: rgba(10, 92, 54, 0.1);
            padding: 6px 12px;
            border-radius: 10px;
            border: 2px solid rgba(10, 92, 54, 0.2);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            min-width: 110px;
            text-align: center;
        }

        body.dark-mode .jamaat-time {
            color: var(--accent-color);
            background: rgba(46, 204, 113, 0.15);
            border-color: rgba(46, 204, 113, 0.3);
        }

        .prayer-row.active .jamaat-time {
            background: rgba(255, 255, 255, 0.25);
            color: white;
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
        }

        /* Azaan Time - SMALL and SUBTLE below Jamaat */
        .azaan-time {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary-light);
            font-family: 'Courier New', monospace;
            opacity: 0.8;
            padding: 2px 8px;
            background: rgba(0, 0, 0, 0.04);
            border-radius: 6px;
            border: 1px dashed rgba(0, 0, 0, 0.1);
            min-width: 110px;
            text-align: center;
        }

        body.dark-mode .azaan-time {
            color: var(--text-secondary-dark);
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .prayer-row.active .azaan-time {
            background: rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-card {
            background: var(--card-light);
            border-radius: 22px;
            padding: 28px 22px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-primary);
            border-radius: 5px 5px 0 0;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        body.dark-mode .feature-card {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
        }

        body.dark-mode .feature-card:hover {
            border-color: var(--accent-color);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 18px;
            height: 65px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            transition: transform 0.3s ease;
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.1);
        }

        body.dark-mode .feature-icon {
            color: var(--accent-color);
        }

        .feature-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 6px;
            position: relative;
            z-index: 2;
        }

        .feature-desc {
            font-size: 0.9rem;
            color: var(--text-secondary-light);
            opacity: 0.9;
            font-weight: 500;
            position: relative;
            z-index: 2;
        }

        body.dark-mode .feature-desc {
            color: var(--text-secondary-dark);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-light);
            display: flex;
            justify-content: space-around;
            padding: 20px 0 18px;
            box-shadow: 0 -6px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            border-radius: 30px 30px 0 0;
            max-width: 500px;
            margin: 0 auto;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0,0,0,0.05);
        }

        body.dark-mode .bottom-nav {
            background: rgba(30, 30, 30, 0.95);
            box-shadow: 0 -6px 30px rgba(0, 0, 0, 0.4);
            border-top-color: rgba(255,255,255,0.05);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary-light);
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 10px 25px;
            border-radius: 22px;
            position: relative;
            min-width: 80px;
        }

        body.dark-mode .nav-item {
            color: var(--text-secondary-dark);
        }

        .nav-item.active {
            color: var(--primary-color);
            background: rgba(10, 92, 54, 0.15);
            transform: translateY(-8px);
        }

        body.dark-mode .nav-item.active {
            color: var(--accent-color);
            background: rgba(46, 204, 113, 0.2);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .nav-item.active .nav-icon {
            transform: scale(1.2);
        }

        .nav-label {
            font-size: 0.95rem;
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        /* Content Panels */
        .content-panel {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .content-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Qibla View */
        .qibla-container {
            text-align: center;
            padding: 25px 0;
        }

        .compass-wrapper {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 35px auto;
        }

        .compass-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--card-light);
            position: relative;
            box-shadow: 
                var(--shadow-large),
                inset 0 0 40px rgba(0, 0, 0, 0.08),
                0 0 0 2px rgba(10, 92, 54, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        body.dark-mode .compass-circle {
            background: var(--card-dark);
            box-shadow: 
                var(--shadow-dark),
                inset 0 0 40px rgba(0, 0, 0, 0.3),
                0 0 0 2px rgba(46, 204, 113, 0.1);
        }

        .compass-direction {
            position: absolute;
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--primary-color);
            z-index: 2;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            border: 2px solid rgba(10, 92, 54, 0.2);
        }

        body.dark-mode .compass-direction {
            color: var(--accent-color);
            background: rgba(30,30,30,0.9);
            border-color: rgba(46, 204, 113, 0.3);
        }

        .direction-n { top: 20px; left: 50%; transform: translateX(-50%); }
        .direction-e { top: 50%; right: 20px; transform: translateY(-50%); }
        .direction-s { bottom: 20px; left: 50%; transform: translateX(-50%); }
        .direction-w { top: 50%; left: 20px; transform: translateY(-50%); }

        .compass-needle {
            position: absolute;
            width: 8px;
            height: 140px;
            background: linear-gradient(to top, var(--danger-color), #ff6b6b, var(--danger-color));
            top: 50%;
            left: 50%;
            transform-origin: 50% 0;
            transform: translateX(-50%) rotate(0deg);
            border-radius: 4px;
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.7);
            z-index: 10;
            transition: transform 0.2s ease;
        }

        .compass-needle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 20px solid var(--danger-color);
        }

        .compass-center {
            position: absolute;
            width: 28px;
            height: 28px;
            background: var(--danger-color);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 11;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.9);
            border: 3px solid white;
        }

        body.dark-mode .compass-center {
            border-color: var(--card-dark);
        }

        /* Kaaba Symbol */
        .kaaba-symbol {
            position: absolute;
            bottom: 80px;
            left: 25px;
            width: 50px;
            height: 50px;
            background: #8B4513;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.4);
            z-index: 3;
            border: 2px solid #D2691E;
        }

        .kaaba-symbol::before {
            content: '';
            position: absolute;
            width: 70%;
            height: 4px;
            background: gold;
            border-radius: 2px;
        }

        .kaaba-symbol::after {
            content: 'üïã';
            font-size: 24px;
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
        }

        .qibla-info {
            margin-top: 40px;
            background: var(--card-light);
            padding: 30px 25px;
            border-radius: 28px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(10, 92, 54, 0.1);
        }

        body.dark-mode .qibla-info {
            background: var(--card-dark);
            border-color: rgba(46, 204, 113, 0.1);
        }

        .qibla-degree {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary-color);
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.15);
            position: relative;
            display: inline-block;
            padding: 10px 25px;
            background: rgba(10, 92, 54, 0.08);
            border-radius: 15px;
        }

        body.dark-mode .qibla-degree {
            color: var(--accent-color);
            background: rgba(46, 204, 113, 0.12);
        }

        .qibla-instruction {
            font-size: 1.2rem;
            margin: 20px 0;
            color: var(--text-light);
            font-weight: 600;
            line-height: 1.5;
            padding: 15px;
            background: rgba(10, 92, 54, 0.05);
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        body.dark-mode .qibla-instruction {
            color: var(--text-dark);
            background: rgba(46, 204, 113, 0.08);
            border-left-color: var(--accent-color);
        }

        .compass-status {
            background: rgba(10, 92, 54, 0.12);
            padding: 15px 25px;
            border-radius: 18px;
            margin-top: 25px;
            display: inline-block;
            font-weight: 700;
            color: var(--primary-color);
            border: 2px dashed rgba(10, 92, 54, 0.3);
            transition: all 0.3s ease;
        }

        body.dark-mode .compass-status {
            background: rgba(46, 204, 113, 0.15);
            color: var(--accent-color);
            border-color: rgba(46, 204, 113, 0.4);
        }

        /* Timings Columns View */
        .timings-container {
            padding: 25px 0;
        }

        .month-selector {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: var(--card-light);
            padding: 22px 25px;
            border-radius: 22px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(10, 92, 54, 0.1);
        }

        body.dark-mode .month-selector {
            background: var(--card-dark);
            border-color: rgba(46, 204, 113, 0.1);
        }

        .month-nav {
            background: var(--gradient-primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(10, 92, 54, 0.3);
        }

        .month-nav:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(10, 92, 54, 0.4);
        }

        body.dark-mode .month-nav {
            background: var(--gradient-accent);
        }

        .current-month {
            font-size: 1.5rem;
            font-weight: 800;
            text-align: center;
            color: var(--primary-color);
            padding: 10px 25px;
            background: rgba(10, 92, 54, 0.08);
            border-radius: 15px;
            min-width: 200px;
        }

        body.dark-mode .current-month {
            color: var(--accent-color);
            background: rgba(46, 204, 113, 0.12);
        }

        /* Timings Table */
        .timings-table {
            width: 100%;
            background: var(--card-light);
            border-radius: 22px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 2px solid rgba(10, 92, 54, 0.1);
            border-collapse: collapse;
        }

        body.dark-mode .timings-table {
            background: var(--card-dark);
            border-color: rgba(46, 204, 113, 0.1);
        }

        .timings-table th {
            background: var(--gradient-primary);
            color: white;
            padding: 15px 10px;
            font-weight: 700;
            text-align: center;
            font-size: 1rem;
            border: 1px solid rgba(255,255,255,0.2);
        }

        body.dark-mode .timings-table th {
            background: var(--gradient-accent);
        }

        .timings-table td {
            padding: 12px 8px;
            text-align: center;
            border: 1px solid var(--border-light);
            font-size: 0.95rem;
            font-weight: 600;
        }

        body.dark-mode .timings-table td {
            border-color: var(--border-dark);
        }

        .today-row {
            background: rgba(10, 92, 54, 0.1) !important;
            font-weight: 900;
            color: var(--primary-color);
        }

        body.dark-mode .today-row {
            background: rgba(46, 204, 113, 0.15) !important;
            color: var(--accent-color);
        }

        .time-cell {
            font-family: 'Courier New', monospace;
            font-weight: 700;
        }

        /* Tasbeeh Counter */
        .tasbeeh-container {
            text-align: center;
            padding: 35px 0;
        }

        .tasbeeh-counter {
            font-size: 6rem;
            font-weight: 900;
            color: var(--primary-color);
            margin: 35px 0;
            font-family: 'Courier New', monospace;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.2);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(10, 92, 54, 0.08);
            border-radius: 25px;
            padding: 20px;
            border: 3px dashed rgba(10, 92, 54, 0.2);
        }

        body.dark-mode .tasbeeh-counter {
            color: var(--accent-color);
            background: rgba(46, 204, 113, 0.12);
            border-color: rgba(46, 204, 113, 0.3);
        }

        .tasbeeh-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            font-size: 1.8rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(10, 92, 54, 0.5);
            transition: all 0.3s ease;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
        }

        .tasbeeh-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 15px 40px rgba(10, 92, 54, 0.6);
        }

        .tasbeeh-btn:active {
            transform: scale(0.95);
            box-shadow: 0 5px 20px rgba(10, 92, 54, 0.4);
        }

        .tasbeeh-controls {
            display: flex;
            justify-content: center;
            gap: 18px;
            margin-top: 35px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: var(--card-light);
            border: 3px solid var(--primary-color);
            color: var(--primary-color);
            padding: 16px 28px;
            border-radius: 18px;
            cursor: pointer;
            font-weight: 800;
            transition: all 0.3s ease;
            min-width: 130px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .control-btn {
            background: var(--card-dark);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .control-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(10, 92, 54, 0.3);
        }

        body.dark-mode .control-btn:hover {
            background: var(--accent-color);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-light);
            width: 100%;
            max-width: 500px;
            border-radius: 28px;
            padding: 35px 30px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            max-height: 85vh;
            overflow-y: auto;
            animation: slideUp 0.4s ease;
            border: 2px solid rgba(10, 92, 54, 0.2);
        }

        body.dark-mode .modal-content {
            background: var(--card-dark);
            border-color: rgba(46, 204, 113, 0.2);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-light);
        }

        body.dark-mode .modal-header {
            border-bottom-color: var(--border-dark);
        }

        .modal-title {
            font-size: 1.7rem;
            font-weight: 800;
            color: var(--primary-color);
        }

        body.dark-mode .modal-title {
            color: var(--accent-color);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-secondary-light);
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--danger-color);
        }

        body.dark-mode .close-modal:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-light);
        }

        body.dark-mode .input-group label {
            color: var(--text-dark);
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--border-light);
            border-radius: 15px;
            font-size: 1rem;
            background: var(--background-light);
            color: var(--text-light);
            transition: all 0.3s ease;
        }

        body.dark-mode .input-group input {
            background: var(--background-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(10, 92, 54, 0.1);
        }

        body.dark-mode .input-group input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.2);
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--border-light);
        }

        body.dark-mode .modal-actions {
            border-top-color: var(--border-dark);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(10, 92, 54, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(10, 92, 54, 0.4);
        }

        body.dark-mode .btn-primary {
            background: var(--gradient-accent);
        }

        .btn-secondary {
            background: var(--border-light);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background: var(--border-dark);
            transform: translateY(-3px);
        }

        body.dark-mode .btn-secondary {
            background: var(--border-dark);
            color: var(--text-dark);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-light);
            color: var(--text-light);
            padding: 18px 25px;
            border-radius: 15px;
            box-shadow: var(--shadow-large);
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.4s ease;
            max-width: 350px;
            border-left: 5px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .toast.show {
            transform: translateX(0);
        }

        body.dark-mode .toast {
            background: var(--card-dark);
            color: var(--text-dark);
            border-left-color: var(--accent-color);
        }

        .toast-icon {
            font-size: 1.4rem;
            color: var(--primary-color);
        }

        body.dark-mode .toast-icon {
            color: var(--accent-color);
        }

        .toast-message {
            flex: 1;
            font-weight: 600;
        }

        /* Responsive Design */
        @media (max-width: 500px) {
            .container {
                padding: 0 12px;
            }
            
            .masjid-name {
                font-size: 2rem;
            }
            
            .prayer-time {
                font-size: 3rem;
            }
            
            .time-left {
                font-size: 1.3rem;
                padding: 12px 25px;
            }
            
            /* Updated prayer times for mobile */
            .jamaat-time {
                font-size: 1.6rem;
                min-width: 100px;
                padding: 5px 10px;
            }
            
            .azaan-time {
                font-size: 0.85rem;
                min-width: 100px;
                padding: 2px 6px;
            }
            
            .compass-wrapper {
                width: 260px;
                height: 260px;
            }
            
            .kaaba-symbol {
                bottom: 70px;
                left: 20px;
                width: 45px;
                height: 45px;
            }
            
            .timings-table th,
            .timings-table td {
                padding: 10px 5px;
                font-size: 0.9rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
                gap: 18px;
            }
            
            .feature-card {
                padding: 20px;
            }
            
            .tasbeeh-counter {
                font-size: 5rem;
            }
            
            .tasbeeh-btn {
                width: 130px;
                height: 130px;
                font-size: 1.6rem;
            }
            
            .control-btn {
                min-width: 110px;
                padding: 14px 22px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 350px) {
            .masjid-name {
                font-size: 1.8rem;
            }
            
            .prayer-time {
                font-size: 2.5rem;
            }
            
            .time-left {
                font-size: 1.2rem;
            }
            
            /* Further reduce prayer times for very small screens */
            .jamaat-time {
                font-size: 1.4rem;
                min-width: 90px;
                padding: 4px 8px;
            }
            
            .azaan-time {
                font-size: 0.8rem;
                min-width: 90px;
                padding: 1px 4px;
            }
            
            .compass-wrapper {
                width: 220px;
                height: 220px;
            }
            
            .kaaba-symbol {
                bottom: 60px;
                left: 15px;
                width: 40px;
                height: 40px;
            }
            
            .timings-table th,
            .timings-table td {
                padding: 8px 3px;
                font-size: 0.8rem;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s;
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-bell toast-icon"></i>
        <div class="toast-message" id="toastMessage"></div>
    </div>

    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
        <div class="theme-toggle" id="themeToggle"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="masjid-name">ŸÖŸéÿ≥Ÿíÿ¨ŸêÿØŸí ÿßŸéŸÑŸíÿ≠ŸéŸÖŸíÿ≤Ÿé€É</div>
            <div class="location">HajiBagh, Buchpora, Srinagar</div>
            <div class="date-container">
                <div class="current-date" id="currentDate"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Home View -->
        <div class="content-panel active" id="homePanel">
            <!-- Next Prayer Card -->
            <div class="next-prayer-card">
                <div class="card-title">NEXT PRAYER</div>
                <div class="prayer-name" id="nextPrayerName">FAJR</div>
                <div class="prayer-time" id="nextPrayerTime">05:45 AM</div>
                <div class="time-left" id="timeLeft">03:25:18</div>
                <div class="prayer-progress">
                    <div class="progress-bar" id="prayerProgress"></div>
                </div>
            </div>

            <!-- Prayer Times -->
            <div class="prayer-times-grid">
                <div class="section-title">
                    <i class="fas fa-clock"></i>
                    TODAY'S PRAYER TIMES
                </div>
                <div id="prayerTimesList">
                    <!-- Filled by JavaScript -->
                </div>
            </div>

            <!-- Features Grid -->
            <div class="features-grid">
                <div class="feature-card" data-panel="tasbeeh">
                    <div class="feature-icon">
                        <i class="fas fa-hands-praying"></i>
                    </div>
                    <div class="feature-name">Tasbeeh Counter</div>
                    <div class="feature-desc">Count your dhikr</div>
                </div>
                <div class="feature-card" data-panel="qibla">
                    <div class="feature-icon">
                        <i class="fas fa-compass"></i>
                    </div>
                    <div class="feature-name">Qibla Direction</div>
                    <div class="feature-desc">Find prayer direction</div>
                </div>
                <div class="feature-card" data-panel="timings">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="feature-name">Prayer Timings</div>
                    <div class="feature-desc">Monthly schedule</div>
                </div>
                <div class="feature-card" id="manualEditBtn">
                    <div class="feature-icon">
                        <i class="fas fa-edit"></i>
                    </div>
                    <div class="feature-name">Edit Times</div>
                    <div class="feature-desc">Customize prayer times</div>
                </div>
            </div>
        </div>

        <!-- Timings Columns View -->
        <div class="content-panel" id="timingsPanel">
            <div class="timings-container">
                <div class="section-title">
                    <i class="fas fa-calendar-days"></i>
                    PRAYER TIMINGS COLUMNS
                </div>
                
                <div class="month-selector">
                    <button class="month-nav" id="prevMonthBtn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="current-month" id="currentMonth">January 2026</div>
                    <button class="month-nav" id="nextMonthBtn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <div id="timingsTableContainer">
                    <!-- Prayer timings table will be generated here -->
                </div>
            </div>
        </div>

        <!-- Qibla View -->
        <div class="content-panel" id="qiblaPanel">
            <div class="qibla-container">
                <div class="section-title">
                    <i class="fas fa-kaaba"></i>
                    QIBLA DIRECTION
                </div>
                <div class="compass-wrapper">
                    <div class="compass-circle">
                        <div class="compass-direction direction-n">N</div>
                        <div class="compass-direction direction-e">E</div>
                        <div class="compass-direction direction-s">S</div>
                        <div class="compass-direction direction-w">W</div>
                        
                        <!-- Kaaba Symbol -->
                        <div class="kaaba-symbol"></div>
                        
                        <!-- Compass Needle -->
                        <div class="compass-needle" id="compassNeedle"></div>
                        <div class="compass-center"></div>
                    </div>
                </div>
                <div class="qibla-info">
                    <div class="qibla-degree" id="qiblaDegree">257¬∞</div>
                    <div class="qibla-instruction">Point the red needle towards Kaaba (üïã symbol on left)</div>
                    <div class="compass-status" id="compassStatus">Compass Active - Get Exact Qibla Direction</div>
                </div>
            </div>
        </div>

        <!-- Tasbeeh Counter View -->
        <div class="content-panel" id="tasbeehPanel">
            <div class="tasbeeh-container">
                <div class="section-title">
                    <i class="fas fa-hands-praying"></i>
                    TASBEEH COUNTER
                </div>
                <div class="tasbeeh-counter" id="tasbeehCount">0</div>
                <button class="tasbeeh-btn" id="tasbeehBtn">ÿ≥ÿ®ÿ≠ÿßŸÜ ÿßŸÑŸÑŸá</button>
                <div class="tasbeeh-controls">
                    <button class="control-btn" id="resetTasbeeh">
                        <i class="fas fa-redo"></i>
                        Reset
                    </button>
                    <button class="control-btn" id="changeDhikr">
                        <i class="fas fa-exchange-alt"></i>
                        Change Dhikr
                    </button>
                    <button class="control-btn" id="saveTasbeeh">
                        <i class="fas fa-save"></i>
                        Save
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-panel="home">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">Home</span>
        </a>
        <a href="#" class="nav-item" data-panel="timings">
            <i class="fas fa-calendar-alt nav-icon"></i>
            <span class="nav-label">Timings</span>
        </a>
        <a href="#" class="nav-item" data-panel="qibla">
            <i class="fas fa-compass nav-icon"></i>
            <span class="nav-label">Qibla</span>
        </a>
        <a href="#" class="nav-item" data-panel="tasbeeh">
            <i class="fas fa-hands-praying nav-icon"></i>
            <span class="nav-label">Tasbeeh</span>
        </a>
    </nav>

    <!-- Manual Input Modal -->
    <div class="modal" id="manualInputModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Prayer Times</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="input-group">
                <label for="editDate">Note: Times are for today only</label>
                <input type="text" id="editDate" placeholder="Today's date will show here" disabled>
            </div>

            <div class="input-group">
                <label for="editFajr">Fajr (Azaan)</label>
                <input type="text" id="editFajr" placeholder="06:55 AM">
            </div>

            <div class="input-group">
                <label for="editDhuhr">Dhuhr (Azaan)</label>
                <input type="text" id="editDhuhr" placeholder="01:00 PM">
            </div>

            <div class="input-group">
                <label for="editAsr">Asr (Azaan)</label>
                <input type="text" id="editAsr" placeholder="04:30 PM">
            </div>

            <div class="input-group">
                <label for="editMaghrib">Maghrib (Azaan)</label>
                <input type="text" id="editMaghrib" placeholder="05:59 PM">
            </div>

            <div class="input-group">
                <label for="editIsha">Isha (Azaan)</label>
                <input type="text" id="editIsha" placeholder="07:35 PM">
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelEdit">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveEdit">
                    <i class="fas fa-save"></i>
                    Save Today's Times
                </button>
            </div>
        </div>
    </div>

    <script>
   // Enhanced Prayer Times App for Masjid Al Hamzah
class PrayerApp {
    constructor() {
        this.data = {
            darkMode: false,
            currentView: 'home',
            tasbeehCount: 0,
            currentDhikr: 0,
            currentMonthIndex: 0, // 0=Jan, 1=Feb, 2=Mar
            months: ["January 2026", "February 2026", "March 2026"],
            prayerTimes: {},
            qiblaDirection: 257,
            settings: {
                notifications: true,
            }
        };
        
        this.prayers = [
            { name: "Fajr", key: "fajr", icon: "fas fa-sun", order: 0 },
            { name: "Sunrise", key: "sunrise", icon: "fas fa-sunrise", order: 1 },
            { name: "Dhuhr", key: "dhuhr", icon: "fas fa-sun", order: 2 },
            { name: "Asr", key: "asr", icon: "fas fa-cloud-sun", order: 3 },
            { name: "Maghrib", key: "maghrib", icon: "fas fa-sun", order: 4 },
            { name: "Isha", key: "isha", icon: "fas fa-moon", order: 5 }
        ];
        
        this.dhikrOptions = [
            { text: "ÿ≥ÿ®ÿ≠ÿßŸÜ ÿßŸÑŸÑŸá", count: 33, arabic: "Subhanallah" },
            { text: "ÿßŸÑÿ≠ŸÖÿØ ŸÑŸÑŸá", count: 33, arabic: "Alhamdulillah" },
            { text: "ÿßŸÑŸÑŸá ÿ£ŸÉÿ®ÿ±", count: 34, arabic: "Allahu Akbar" },
            { text: "ŸÑÿß ÿ•ŸÑŸá ÿ•ŸÑÿß ÿßŸÑŸÑŸá", count: 100, arabic: "La ilaha illallah" },
            { text: "ÿ£ÿ≥ÿ™ÿ∫ŸÅÿ± ÿßŸÑŸÑŸá", count: 100, arabic: "Astaghfirullah" }
        ];
        
        // ACTUAL PRAYER TIMES FROM YOUR PDFs - ALL DATES INCLUDED
        this.monthlyPrayerTimes = {
            "January 2026": this.getJanuaryTimes(),
            "February 2026": this.getFebruaryTimes(),
            "March 2026": this.getMarchTimes()
        };
        
        this.init();
    }
    
    // January 2026 Prayer Times from PDF - ALL 31 DAYS
    getJanuaryTimes() {
        return [
            { day: 1, fajr: "06:08 AM", sunrise: "07:36 AM", dhuhr: "12:35 PM", asr: "03:15 PM", maghrib: "05:33 PM", isha: "07:02 PM" },
            { day: 2, fajr: "06:08 AM", sunrise: "07:36 AM", dhuhr: "12:35 PM", asr: "03:15 PM", maghrib: "05:33 PM", isha: "07:03 PM" },
            { day: 3, fajr: "06:08 AM", sunrise: "07:36 AM", dhuhr: "12:36 PM", asr: "03:16 PM", maghrib: "05:34 PM", isha: "07:03 PM" },
            { day: 4, fajr: "06:08 AM", sunrise: "07:36 AM", dhuhr: "12:36 PM", asr: "03:17 PM", maghrib: "05:35 PM", isha: "07:04 PM" },
            { day: 5, fajr: "06:08 AM", sunrise: "07:37 AM", dhuhr: "12:37 PM", asr: "03:18 PM", maghrib: "05:36 PM", isha: "07:05 PM" },
            { day: 6, fajr: "06:08 AM", sunrise: "07:37 AM", dhuhr: "12:37 PM", asr: "03:18 PM", maghrib: "05:37 PM", isha: "07:06 PM" },
            { day: 7, fajr: "06:09 AM", sunrise: "07:37 AM", dhuhr: "12:37 PM", asr: "03:19 PM", maghrib: "05:38 PM", isha: "07:06 PM" },
            { day: 8, fajr: "06:09 AM", sunrise: "07:37 AM", dhuhr: "12:38 PM", asr: "03:20 PM", maghrib: "05:38 PM", isha: "07:07 PM" },
            { day: 9, fajr: "06:09 AM", sunrise: "07:37 AM", dhuhr: "12:38 PM", asr: "03:21 PM", maghrib: "05:39 PM", isha: "07:08 PM" },
            { day: 10, fajr: "06:09 AM", sunrise: "07:37 AM", dhuhr: "12:39 PM", asr: "03:22 PM", maghrib: "05:40 PM", isha: "07:09 PM" },
            { day: 11, fajr: "06:09 AM", sunrise: "07:36 AM", dhuhr: "12:39 PM", asr: "03:22 PM", maghrib: "05:41 PM", isha: "07:10 PM" },
            { day: 12, fajr: "06:09 AM", sunrise: "07:36 AM", dhuhr: "12:40 PM", asr: "03:23 PM", maghrib: "05:42 PM", isha: "07:10 PM" },
            { day: 13, fajr: "06:09 AM", sunrise: "07:36 AM", dhuhr: "12:40 PM", asr: "03:24 PM", maghrib: "05:43 PM", isha: "07:11 PM" },
            { day: 14, fajr: "06:09 AM", sunrise: "07:36 AM", dhuhr: "12:40 PM", asr: "03:25 PM", maghrib: "05:44 PM", isha: "07:12 PM" },
            { day: 15, fajr: "06:09 AM", sunrise: "07:36 AM", dhuhr: "12:41 PM", asr: "03:26 PM", maghrib: "05:45 PM", isha: "07:13 PM" },
            { day: 16, fajr: "06:08 AM", sunrise: "07:36 AM", dhuhr: "12:41 PM", asr: "03:27 PM", maghrib: "05:46 PM", isha: "07:14 PM" },
            { day: 17, fajr: "06:08 AM", sunrise: "07:35 AM", dhuhr: "12:41 PM", asr: "03:27 PM", maghrib: "05:47 PM", isha: "07:14 PM" },
            { day: 18, fajr: "06:08 AM", sunrise: "07:35 AM", dhuhr: "12:42 PM", asr: "03:28 PM", maghrib: "05:48 PM", isha: "07:15 PM" },
            { day: 19, fajr: "06:08 AM", sunrise: "07:35 AM", dhuhr: "12:42 PM", asr: "03:29 PM", maghrib: "05:49 PM", isha: "07:16 PM" },
            { day: 20, fajr: "06:08 AM", sunrise: "07:34 AM", dhuhr: "12:42 PM", asr: "03:30 PM", maghrib: "05:50 PM", isha: "07:17 PM" },
            { day: 21, fajr: "06:07 AM", sunrise: "07:34 AM", dhuhr: "12:43 PM", asr: "03:31 PM", maghrib: "05:50 PM", isha: "07:18 PM" },
            { day: 22, fajr: "06:07 AM", sunrise: "07:33 AM", dhuhr: "12:43 PM", asr: "03:32 PM", maghrib: "05:51 PM", isha: "07:19 PM" },
            { day: 23, fajr: "06:07 AM", sunrise: "07:33 AM", dhuhr: "12:43 PM", asr: "03:33 PM", maghrib: "05:52 PM", isha: "07:20 PM" },
            { day: 24, fajr: "06:06 AM", sunrise: "07:33 AM", dhuhr: "12:43 PM", asr: "03:33 PM", maghrib: "05:53 PM", isha: "07:20 PM" },
            { day: 25, fajr: "06:06 AM", sunrise: "07:32 AM", dhuhr: "12:44 PM", asr: "03:34 PM", maghrib: "05:54 PM", isha: "07:21 PM" },
            { day: 26, fajr: "06:05 AM", sunrise: "07:31 AM", dhuhr: "12:44 PM", asr: "03:35 PM", maghrib: "05:55 PM", isha: "07:22 PM" },
            { day: 27, fajr: "06:05 AM", sunrise: "07:31 AM", dhuhr: "12:44 PM", asr: "03:36 PM", maghrib: "05:56 PM", isha: "07:23 PM" },
            { day: 28, fajr: "06:05 AM", sunrise: "07:30 AM", dhuhr: "12:44 PM", asr: "03:37 PM", maghrib: "05:57 PM", isha: "07:24 PM" },
            { day: 29, fajr: "06:04 AM", sunrise: "07:30 AM", dhuhr: "12:44 PM", asr: "03:38 PM", maghrib: "05:58 PM", isha: "07:25 PM" },
            { day: 30, fajr: "06:04 AM", sunrise: "07:29 AM", dhuhr: "12:45 PM", asr: "03:38 PM", maghrib: "05:59 PM", isha: "07:26 PM" },
            { day: 31, fajr: "06:03 AM", sunrise: "07:28 AM", dhuhr: "12:45 PM", asr: "03:39 PM", maghrib: "06:00 PM", isha: "07:26 PM" }
        ];
    }
    
    // February 2026 Prayer Times from PDF - ALL 28 DAYS
    getFebruaryTimes() {
        return [
            { day: 1, fajr: "06:02 AM", sunrise: "07:28 AM", dhuhr: "12:45 PM", asr: "03:40 PM", maghrib: "06:01 PM", isha: "07:27 PM" },
            { day: 2, fajr: "06:02 AM", sunrise: "07:27 AM", dhuhr: "12:45 PM", asr: "03:41 PM", maghrib: "06:02 PM", isha: "07:28 PM" },
            { day: 3, fajr: "06:01 AM", sunrise: "07:26 AM", dhuhr: "12:45 PM", asr: "03:42 PM", maghrib: "06:03 PM", isha: "07:29 PM" },
            { day: 4, fajr: "06:01 AM", sunrise: "07:25 AM", dhuhr: "12:45 PM", asr: "03:43 PM", maghrib: "06:04 PM", isha: "07:30 PM" },
            { day: 5, fajr: "06:00 AM", sunrise: "07:25 AM", dhuhr: "12:45 PM", asr: "03:43 PM", maghrib: "06:05 PM", isha: "07:31 PM" },
            { day: 6, fajr: "05:59 AM", sunrise: "07:24 AM", dhuhr: "12:45 PM", asr: "03:44 PM", maghrib: "06:06 PM", isha: "07:32 PM" },
            { day: 7, fajr: "05:58 AM", sunrise: "07:23 AM", dhuhr: "12:45 PM", asr: "03:45 PM", maghrib: "06:07 PM", isha: "07:32 PM" },
            { day: 8, fajr: "05:58 AM", sunrise: "07:22 AM", dhuhr: "12:45 PM", asr: "03:46 PM", maghrib: "06:08 PM", isha: "07:33 PM" },
            { day: 9, fajr: "05:57 AM", sunrise: "07:21 AM", dhuhr: "12:45 PM", asr: "03:46 PM", maghrib: "06:09 PM", isha: "07:34 PM" },
            { day: 10, fajr: "05:56 AM", sunrise: "07:20 AM", dhuhr: "12:45 PM", asr: "03:47 PM", maghrib: "06:10 PM", isha: "07:35 PM" },
            { day: 11, fajr: "05:55 AM", sunrise: "07:19 AM", dhuhr: "12:45 PM", asr: "03:48 PM", maghrib: "06:11 PM", isha: "07:36 PM" },
            { day: 12, fajr: "05:54 AM", sunrise: "07:18 AM", dhuhr: "12:45 PM", asr: "03:49 PM", maghrib: "06:12 PM", isha: "07:37 PM" },
            { day: 13, fajr: "05:53 AM", sunrise: "07:17 AM", dhuhr: "12:45 PM", asr: "03:49 PM", maghrib: "06:13 PM", isha: "07:37 PM" },
            { day: 14, fajr: "05:53 AM", sunrise: "07:16 AM", dhuhr: "12:45 PM", asr: "03:50 PM", maghrib: "06:14 PM", isha: "07:38 PM" },
            { day: 15, fajr: "05:52 AM", sunrise: "07:15 AM", dhuhr: "12:45 PM", asr: "03:51 PM", maghrib: "06:15 PM", isha: "07:39 PM" },
            { day: 16, fajr: "05:51 AM", sunrise: "07:14 AM", dhuhr: "12:45 PM", asr: "03:51 PM", maghrib: "06:16 PM", isha: "07:40 PM" },
            { day: 17, fajr: "05:50 AM", sunrise: "07:13 AM", dhuhr: "12:45 PM", asr: "03:52 PM", maghrib: "06:17 PM", isha: "07:41 PM" },
            { day: 18, fajr: "05:49 AM", sunrise: "07:12 AM", dhuhr: "12:45 PM", asr: "03:53 PM", maghrib: "06:18 PM", isha: "07:42 PM" },
            { day: 19, fajr: "05:48 AM", sunrise: "07:11 AM", dhuhr: "12:45 PM", asr: "03:53 PM", maghrib: "06:19 PM", isha: "07:42 PM" },
            { day: 20, fajr: "05:47 AM", sunrise: "07:10 AM", dhuhr: "12:45 PM", asr: "03:54 PM", maghrib: "06:19 PM", isha: "07:43 PM" },
            { day: 21, fajr: "05:46 AM", sunrise: "07:09 AM", dhuhr: "12:45 PM", asr: "03:55 PM", maghrib: "06:20 PM", isha: "07:44 PM" },
            { day: 22, fajr: "05:45 AM", sunrise: "07:08 AM", dhuhr: "12:45 PM", asr: "03:55 PM", maghrib: "06:21 PM", isha: "07:45 PM" },
            { day: 23, fajr: "05:43 AM", sunrise: "07:07 AM", dhuhr: "12:45 PM", asr: "03:56 PM", maghrib: "06:22 PM", isha: "07:46 PM" },
            { day: 24, fajr: "05:42 AM", sunrise: "07:05 AM", dhuhr: "12:44 PM", asr: "03:56 PM", maghrib: "06:23 PM", isha: "07:47 PM" },
            { day: 25, fajr: "05:41 AM", sunrise: "07:04 AM", dhuhr: "12:44 PM", asr: "03:57 PM", maghrib: "06:24 PM", isha: "07:47 PM" },
            { day: 26, fajr: "05:40 AM", sunrise: "07:03 AM", dhuhr: "12:44 PM", asr: "03:57 PM", maghrib: "06:25 PM", isha: "07:48 PM" },
            { day: 27, fajr: "05:39 AM", sunrise: "07:02 AM", dhuhr: "12:44 PM", asr: "03:58 PM", maghrib: "06:26 PM", isha: "07:49 PM" },
            { day: 28, fajr: "05:38 AM", sunrise: "07:01 AM", dhuhr: "12:44 PM", asr: "03:58 PM", maghrib: "06:26 PM", isha: "07:50 PM" }
        ];
    }
    
    // March 2026 Prayer Times from PDF - ALL 31 DAYS
    getMarchTimes() {
        return [
            { day: 1, fajr: "05:37 AM", sunrise: "06:59 AM", dhuhr: "12:44 PM", asr: "03:59 PM", maghrib: "06:27 PM", isha: "07:51 PM" },
            { day: 2, fajr: "05:35 AM", sunrise: "06:58 AM", dhuhr: "12:43 PM", asr: "03:59 PM", maghrib: "06:28 PM", isha: "07:52 PM" },
            { day: 3, fajr: "05:34 AM", sunrise: "06:57 AM", dhuhr: "12:43 PM", asr: "04:00 PM", maghrib: "06:29 PM", isha: "07:52 PM" },
            { day: 4, fajr: "05:33 AM", sunrise: "06:56 AM", dhuhr: "12:43 PM", asr: "04:00 PM", maghrib: "06:30 PM", isha: "07:53 PM" },
            { day: 5, fajr: "05:32 AM", sunrise: "06:54 AM", dhuhr: "12:43 PM", asr: "04:01 PM", maghrib: "06:31 PM", isha: "07:54 PM" },
            { day: 6, fajr: "05:30 AM", sunrise: "06:53 AM", dhuhr: "12:43 PM", asr: "04:01 PM", maghrib: "06:32 PM", isha: "07:55 PM" },
            { day: 7, fajr: "05:29 AM", sunrise: "06:52 AM", dhuhr: "12:42 PM", asr: "04:02 PM", maghrib: "06:32 PM", isha: "07:56 PM" },
            { day: 8, fajr: "05:28 AM", sunrise: "06:51 AM", dhuhr: "12:42 PM", asr: "04:02 PM", maghrib: "06:33 PM", isha: "07:57 PM" },
            { day: 9, fajr: "05:26 AM", sunrise: "06:49 AM", dhuhr: "12:42 PM", asr: "04:02 PM", maghrib: "06:34 PM", isha: "07:57 PM" },
            { day: 10, fajr: "05:25 AM", sunrise: "06:48 AM", dhuhr: "12:42 PM", asr: "04:03 PM", maghrib: "06:35 PM", isha: "07:58 PM" },
            { day: 11, fajr: "05:24 AM", sunrise: "06:47 AM", dhuhr: "12:41 PM", asr: "04:03 PM", maghrib: "06:36 PM", isha: "07:59 PM" },
            { day: 12, fajr: "05:22 AM", sunrise: "06:45 AM", dhuhr: "12:41 PM", asr: "04:04 PM", maghrib: "06:36 PM", isha: "08:00 PM" },
            { day: 13, fajr: "05:21 AM", sunrise: "06:44 AM", dhuhr: "12:41 PM", asr: "04:04 PM", maghrib: "06:37 PM", isha: "08:01 PM" },
            { day: 14, fajr: "05:20 AM", sunrise: "06:43 AM", dhuhr: "12:41 PM", asr: "04:04 PM", maghrib: "06:38 PM", isha: "08:02 PM" },
            { day: 15, fajr: "05:18 AM", sunrise: "06:41 AM", dhuhr: "12:40 PM", asr: "04:05 PM", maghrib: "06:39 PM", isha: "08:02 PM" },
            { day: 16, fajr: "05:17 AM", sunrise: "06:40 AM", dhuhr: "12:40 PM", asr: "04:05 PM", maghrib: "06:40 PM", isha: "08:03 PM" },
            { day: 17, fajr: "05:15 AM", sunrise: "06:39 AM", dhuhr: "12:40 PM", asr: "04:05 PM", maghrib: "06:40 PM", isha: "08:04 PM" },
            { day: 18, fajr: "05:14 AM", sunrise: "06:37 AM", dhuhr: "12:39 PM", asr: "04:06 PM", maghrib: "06:41 PM", isha: "08:05 PM" },
            { day: 19, fajr: "05:12 AM", sunrise: "06:36 AM", dhuhr: "12:39 PM", asr: "04:06 PM", maghrib: "06:42 PM", isha: "08:06 PM" },
            { day: 20, fajr: "05:11 AM", sunrise: "06:34 AM", dhuhr: "12:39 PM", asr: "04:06 PM", maghrib: "06:43 PM", isha: "08:07 PM" },
            { day: 21, fajr: "05:10 AM", sunrise: "06:33 AM", dhuhr: "12:39 PM", asr: "04:06 PM", maghrib: "06:43 PM", isha: "08:07 PM" },
            { day: 22, fajr: "05:08 AM", sunrise: "06:32 AM", dhuhr: "12:38 PM", asr: "04:07 PM", maghrib: "06:44 PM", isha: "08:08 PM" },
            { day: 23, fajr: "05:07 AM", sunrise: "06:30 AM", dhuhr: "12:38 PM", asr: "04:07 PM", maghrib: "06:45 PM", isha: "08:09 PM" },
            { day: 24, fajr: "05:05 AM", sunrise: "06:29 AM", dhuhr: "12:38 PM", asr: "04:07 PM", maghrib: "06:46 PM", isha: "08:10 PM" },
            { day: 25, fajr: "05:04 AM", sunrise: "06:28 AM", dhuhr: "12:37 PM", asr: "04:07 PM", maghrib: "06:47 PM", isha: "08:11 PM" },
            { day: 26, fajr: "05:02 AM", sunrise: "06:26 AM", dhuhr: "12:37 PM", asr: "04:07 PM", maghrib: "06:47 PM", isha: "08:12 PM" },
            { day: 27, fajr: "05:01 AM", sunrise: "06:25 AM", dhuhr: "12:37 PM", asr: "04:08 PM", maghrib: "06:48 PM", isha: "08:13 PM" },
            { day: 28, fajr: "04:59 AM", sunrise: "06:24 AM", dhuhr: "12:36 PM", asr: "04:08 PM", maghrib: "06:49 PM", isha: "08:14 PM" },
            { day: 29, fajr: "04:58 AM", sunrise: "06:22 AM", dhuhr: "12:36 PM", asr: "04:08 PM", maghrib: "06:50 PM", isha: "08:15 PM" },
            { day: 30, fajr: "04:56 AM", sunrise: "06:21 AM", dhuhr: "12:36 PM", asr: "04:08 PM", maghrib: "06:50 PM", isha: "08:15 PM" },
            { day: 31, fajr: "04:55 AM", sunrise: "06:19 AM", dhuhr: "12:35 PM", asr: "04:08 PM", maghrib: "06:51 PM", isha: "08:16 PM" }
        ];
    }
    
    init() {
        this.loadData();
        this.setupEventListeners();
        this.updateDateTime();
        this.updatePrayerDisplay();
        this.generateTimingsTable();
        this.setupCompass();
        
        // Start intervals
        setInterval(() => this.updateDateTime(), 1000);
        setInterval(() => this.updateNextPrayer(), 1000);
        
        this.applyTheme();
        this.showToast('Welcome to Masjid Al Hamzah App', 'success');
    }
    
    loadData() {
        const saved = localStorage.getItem('masjidAlHamzah');
        if (saved) {
            const parsed = JSON.parse(saved);
            this.data.darkMode = parsed.darkMode || false;
            this.data.tasbeehCount = parsed.tasbeehCount || 0;
        }
    }
    
    saveData() {
        localStorage.setItem('masjidAlHamzah', JSON.stringify({
            darkMode: this.data.darkMode,
            tasbeehCount: this.data.tasbeehCount
        }));
    }
    
    calculatePrayerTimesForToday() {
        const today = new Date();
        const day = today.getDate();
        const monthIndex = today.getMonth(); // 0=Jan, 1=Feb, 2=Mar
        
        let monthData;
        if (monthIndex === 0) {
            monthData = this.monthlyPrayerTimes["January 2026"];
        } else if (monthIndex === 1) {
            monthData = this.monthlyPrayerTimes["February 2026"];
        } else if (monthIndex === 2) {
            monthData = this.monthlyPrayerTimes["March 2026"];
        } else {
            // Default to January if month not available
            monthData = this.monthlyPrayerTimes["January 2026"];
        }
        
        const todayData = monthData.find(d => d.day === day) || monthData[0];
        
        return {
            fajr: todayData.fajr,
            sunrise: todayData.sunrise,
            dhuhr: todayData.dhuhr,
            asr: todayData.asr,
            maghrib: todayData.maghrib,
            isha: todayData.isha
        };
    }
    
    setupEventListeners() {
        // Theme toggle
        document.getElementById('themeToggle').addEventListener('click', () => this.toggleTheme());
        
        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                this.switchView(item.dataset.panel);
            });
        });
        
        // Feature cards
        document.querySelectorAll('.feature-card[data-panel]').forEach(card => {
            card.addEventListener('click', () => {
                this.switchView(card.dataset.panel);
            });
        });
        
        // Manual edit
        document.getElementById('manualEditBtn').addEventListener('click', () => this.openEditModal());
        document.getElementById('closeModal').addEventListener('click', () => this.closeModal());
        document.getElementById('cancelEdit').addEventListener('click', () => this.closeModal());
        document.getElementById('saveEdit').addEventListener('click', () => this.saveManualTimes());
        
        // Month navigation
        document.getElementById('prevMonthBtn').addEventListener('click', () => this.prevMonth());
        document.getElementById('nextMonthBtn').addEventListener('click', () => this.nextMonth());
        
        // Tasbeeh controls
        document.getElementById('tasbeehBtn').addEventListener('click', () => this.incrementTasbeeh());
        document.getElementById('resetTasbeeh').addEventListener('click', () => this.resetTasbeeh());
        document.getElementById('changeDhikr').addEventListener('click', () => this.changeDhikr());
        document.getElementById('saveTasbeeh').addEventListener('click', () => this.saveTasbeehCount());
    }
    
    updateDateTime() {
        const now = new Date();
        const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
        const dateStr = now.toLocaleDateString('en-GB', options);
        document.getElementById('currentDate').textContent = dateStr;
    }
    
    updatePrayerDisplay() {
        const times = this.calculatePrayerTimesForToday();
        
        const container = document.getElementById('prayerTimesList');
        container.innerHTML = '';
        
        this.prayers.forEach(prayer => {
            const prayerTime = times[prayer.key];
            const row = document.createElement('div');
            row.className = 'prayer-row';
            row.id = `prayer-${prayer.key}`;
            
            row.innerHTML = `
                <div class="prayer-icon">
                    <i class="${prayer.icon}"></i>
                </div>
                <div class="prayer-info">
                    <div class="prayer-label">${prayer.name}</div>
                    <div class="prayer-subtitle">Azaan Time</div>
                </div>
                <div class="prayer-times">
                    <div class="jamaat-time">${prayerTime}</div>
                </div>
            `;
            
            container.appendChild(row);
        });
        
        this.updateCurrentPrayer();
    }
    
    updateCurrentPrayer() {
        const now = new Date();
        const times = this.calculatePrayerTimesForToday();
        
        // Convert current time to minutes since midnight
        const currentMinutes = now.getHours() * 60 + now.getMinutes();
        
        // Convert prayer times to minutes since midnight
        const prayerTimes = [
            { key: 'fajr', time: this.timeToMinutes(times.fajr) },
            { key: 'dhuhr', time: this.timeToMinutes(times.dhuhr) },
            { key: 'asr', time: this.timeToMinutes(times.asr) },
            { key: 'maghrib', time: this.timeToMinutes(times.maghrib) },
            { key: 'isha', time: this.timeToMinutes(times.isha) }
        ];
        
        // Remove active class from all
        document.querySelectorAll('.prayer-row').forEach(row => {
            row.classList.remove('active');
        });
        
        // Find current or next prayer
        let activePrayer = 'isha'; // Default to Isha
        for (let i = 0; i < prayerTimes.length; i++) {
            if (currentMinutes < prayerTimes[i].time) {
                activePrayer = prayerTimes[i].key;
                break;
            }
        }
        
        const activeRow = document.getElementById(`prayer-${activePrayer}`);
        if (activeRow) {
            activeRow.classList.add('active');
        }
    }
    
    timeToMinutes(timeStr) {
        const [time, period] = timeStr.split(' ');
        let [hours, minutes] = time.split(':').map(Number);
        
        if (period === 'PM' && hours < 12) hours += 12;
        if (period === 'AM' && hours === 12) hours = 0;
        
        return hours * 60 + minutes;
    }
    
    updateNextPrayer() {
        const now = new Date();
        const times = this.calculatePrayerTimesForToday();
        
        const prayerTimes = this.prayers
            .filter(p => p.key !== 'sunrise') // Exclude sunrise from next prayer calculation
            .map(prayer => {
                const timeStr = times[prayer.key];
                const [time, period] = timeStr.split(' ');
                let [hours, minutes] = time.split(':').map(Number);
                
                if (period === 'PM' && hours < 12) hours += 12;
                if (period === 'AM' && hours === 12) hours = 0;
                
                const prayerDate = new Date();
                prayerDate.setHours(hours, minutes, 0, 0);
                
                return {
                    name: prayer.name,
                    time: prayerDate,
                    key: prayer.key
                };
            });
        
        prayerTimes.sort((a, b) => a.time - b.time);
        
        let nextPrayer = prayerTimes.find(p => p.time > now);
        if (!nextPrayer) {
            nextPrayer = prayerTimes[0];
            nextPrayer.time.setDate(nextPrayer.time.getDate() + 1);
        }
        
        document.getElementById('nextPrayerName').textContent = nextPrayer.name.toUpperCase();
        document.getElementById('nextPrayerTime').textContent = 
            nextPrayer.time.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        
        const timeDiff = nextPrayer.time - now;
        const hours = Math.floor(timeDiff / (1000 * 60 * 60));
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
        
        document.getElementById('timeLeft').textContent = 
            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        const totalDay = 24 * 60 * 60 * 1000;
        const progress = 100 - (timeDiff / totalDay) * 100;
        document.getElementById('prayerProgress').style.width = `${Math.min(100, Math.max(0, progress))}%`;
    }
    
    switchView(view) {
        this.data.currentView = view;
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.panel === view) {
                item.classList.add('active');
            }
        });
        
        document.querySelectorAll('.content-panel').forEach(panel => {
            panel.classList.remove('active');
        });
        document.getElementById(`${view}Panel`).classList.add('active');
        
        if (view === 'timings') {
            this.generateTimingsTable();
        }
    }
    
    toggleTheme() {
        this.data.darkMode = !this.data.darkMode;
        this.applyTheme();
        this.saveData();
        this.showToast(this.data.darkMode ? 'Dark mode enabled' : 'Light mode enabled', 'info');
    }
    
    applyTheme() {
        if (this.data.darkMode) {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }
    }
    
    // Timings Table Methods
    generateTimingsTable() {
        const monthName = this.data.months[this.data.currentMonthIndex];
        document.getElementById('currentMonth').textContent = monthName;
        
        const today = new Date();
        const currentDay = today.getDate();
        
        const monthData = this.monthlyPrayerTimes[monthName] || [];
        
        let tableHTML = `
            <table class="timings-table">
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Fajr</th>
                        <th>Sunrise</th>
                        <th>Dhuhr</th>
                        <th>Asr</th>
                        <th>Maghrib</th>
                        <th>Isha</th>
                    </tr>
                </thead>
                <tbody>
        `;
        
        monthData.forEach(dayData => {
            const isToday = (this.data.currentMonthIndex === today.getMonth() && dayData.day === currentDay);
            const rowClass = isToday ? 'today-row' : '';
            
            tableHTML += `
                <tr class="${rowClass}">
                    <td>${dayData.day}</td>
                    <td class="time-cell">${dayData.fajr}</td>
                    <td class="time-cell">${dayData.sunrise}</td>
                    <td class="time-cell">${dayData.dhuhr}</td>
                    <td class="time-cell">${dayData.asr}</td>
                    <td class="time-cell">${dayData.maghrib}</td>
                    <td class="time-cell">${dayData.isha}</td>
                </tr>
            `;
        });
        
        tableHTML += `
                </tbody>
            </table>
        `;
        
        document.getElementById('timingsTableContainer').innerHTML = tableHTML;
    }
    
    prevMonth() {
        this.data.currentMonthIndex--;
        if (this.data.currentMonthIndex < 0) {
            this.data.currentMonthIndex = this.data.months.length - 1;
        }
        this.generateTimingsTable();
    }
    
    nextMonth() {
        this.data.currentMonthIndex++;
        if (this.data.currentMonthIndex >= this.data.months.length) {
            this.data.currentMonthIndex = 0;
        }
        this.generateTimingsTable();
    }
    
    // Qibla Methods
    setupCompass() {
        document.getElementById('qiblaDegree').textContent = `${this.data.qiblaDirection}¬∞`;
        
        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', this.handleOrientation.bind(this));
        } else {
            this.startSimulatedCompass();
        }
    }
    
    handleOrientation(event) {
        if (event.alpha !== null) {
            const heading = event.alpha;
            const rotation = (360 - heading + this.data.qiblaDirection) % 360;
            document.getElementById('compassNeedle').style.transform = 
                `translateX(-50%) rotate(${rotation}deg)`;
            document.getElementById('compassStatus').textContent = 
                'Compass active - Point red needle towards Kaaba üïã';
        }
    }
    
    startSimulatedCompass() {
        let simulatedHeading = 0;
        setInterval(() => {
            simulatedHeading = (simulatedHeading + 1) % 360;
            const rotation = (360 - simulatedHeading + this.data.qiblaDirection) % 360;
            document.getElementById('compassNeedle').style.transform = 
                `translateX(-50%) rotate(${rotation}deg)`;
            document.getElementById('compassStatus').textContent = 
                'Simulated compass - Use on mobile for real sensor';
        }, 100);
    }
    
    // Tasbeeh Methods
    incrementTasbeeh() {
        this.data.tasbeehCount++;
        document.getElementById('tasbeehCount').textContent = this.data.tasbeehCount;
        document.getElementById('tasbeehBtn').classList.add('shake');
        setTimeout(() => {
            document.getElementById('tasbeehBtn').classList.remove('shake');
        }, 500);
        
        const target = this.dhikrOptions[this.data.currentDhikr].count;
        if (this.data.tasbeehCount >= target) {
            this.showToast(`Completed ${target} dhikr!`, 'success');
            setTimeout(() => this.resetTasbeeh(), 1000);
        }
        
        this.saveData();
    }
    
    resetTasbeeh() {
        this.data.tasbeehCount = 0;
        document.getElementById('tasbeehCount').textContent = this.data.tasbeehCount;
        this.saveData();
        this.showToast('Tasbeeh counter reset', 'info');
    }
    
    changeDhikr() {
        this.data.currentDhikr = (this.data.currentDhikr + 1) % this.dhikrOptions.length;
        const dhikr = this.dhikrOptions[this.data.currentDhikr];
        document.getElementById('tasbeehBtn').textContent = dhikr.text;
        this.resetTasbeeh();
        this.showToast(`Changed to: ${dhikr.arabic}`, 'info');
    }
    
    saveTasbeehCount() {
        this.saveData();
        this.showToast('Tasbeeh count saved', 'success');
    }
    
    // Modal Methods
    openEditModal() {
        const now = new Date();
        const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
        const dateStr = now.toLocaleDateString('en-GB', options);
        
        const times = this.calculatePrayerTimesForToday();
        
        document.getElementById('editDate').value = dateStr;
        document.getElementById('editFajr').value = times.fajr;
        document.getElementById('editDhuhr').value = times.dhuhr;
        document.getElementById('editAsr').value = times.asr;
        document.getElementById('editMaghrib').value = times.maghrib;
        document.getElementById('editIsha').value = times.isha;
        
        document.getElementById('manualInputModal').classList.add('active');
    }
    
    closeModal() {
        document.getElementById('manualInputModal').classList.remove('active');
    }
    
    saveManualTimes() {
        // For this example, we'll just update today's display
        const fajr = document.getElementById('editFajr').value.trim().toUpperCase();
        const dhuhr = document.getElementById('editDhuhr').value.trim().toUpperCase();
        const asr = document.getElementById('editAsr').value.trim().toUpperCase();
        const maghrib = document.getElementById('editMaghrib').value.trim().toUpperCase();
        const isha = document.getElementById('editIsha').value.trim().toUpperCase();
        
        this.closeModal();
        this.showToast('Today\'s prayer times updated (temporary)', 'success');
        
        // Update display with manual times
        const times = { fajr, dhuhr, asr, maghrib, isha, sunrise: "07:00 AM" }; // Default sunrise
        this.updateDisplayWithManualTimes(times);
    }
    
    updateDisplayWithManualTimes(times) {
        const container = document.getElementById('prayerTimesList');
        container.innerHTML = '';
        
        this.prayers.forEach(prayer => {
            const prayerTime = times[prayer.key];
            const row = document.createElement('div');
            row.className = 'prayer-row';
            row.id = `prayer-${prayer.key}`;
            
            row.innerHTML = `
                <div class="prayer-icon">
                    <i class="${prayer.icon}"></i>
                </div>
                <div class="prayer-info">
                    <div class="prayer-label">${prayer.name}</div>
                    <div class="prayer-subtitle">Azaan Time</div>
                </div>
                <div class="prayer-times">
                    <div class="jamaat-time">${prayerTime}</div>
                </div>
            `;
            
            container.appendChild(row);
        });
    }
    
    showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        
        toastMessage.textContent = message;
        
        const icon = toast.querySelector('.toast-icon');
        switch(type) {
            case 'success':
                icon.className = 'fas fa-check-circle toast-icon';
                toast.style.borderLeftColor = '#2ecc71';
                break;
            case 'warning':
                icon.className = 'fas fa-exclamation-triangle toast-icon';
                toast.style.borderLeftColor = '#f39c12';
                break;
            case 'error':
                icon.className = 'fas fa-times-circle toast-icon';
                toast.style.borderLeftColor = '#e74c3c';
                break;
            default:
                icon.className = 'fas fa-info-circle toast-icon';
                toast.style.borderLeftColor = '#3498db';
        }
        
        toast.classList.add('show');
        
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }
}

// Initialize the app
document.addEventListener('DOMContentLoaded', () => {
    window.app = new PrayerApp();
});
</script>
</body>
</html>
